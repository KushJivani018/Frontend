(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{1208:function(e,a,r){Promise.resolve().then(r.bind(r,5770))},6463:function(e,a,r){"use strict";var t=r(1169);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},3337:function(e,a){"use strict";let r="http://44.220.219.210:8000/";a.Z={root:r,signUp:"".concat(r,"api/auth/register/"),signIn:"".concat(r,"api/auth/login/"),otpVerification:"".concat(r,"api/auth/verify-email/"),forgotPassword:"".concat(r,"api/auth/forgot-password/"),verifyOtp:"".concat(r,"api/auth/forgot-password/"),resetPassword:"".concat(r,"api/auth/reset-password/"),userData:"".concat(r,"/api/user-profile/profile/"),userProfile:"".concat(r,"/api/user-profile/profile/"),workoutActivity:"".concat(r,"/api/workout/activities/"),workoutLog:"".concat(r,"/api/workout/log-workout/"),workoutData:"".concat(r,"/api/workout/workout-history/"),updateWork:"".concat(r,"/api/workout/"),deleteWork:"".concat(r,"/api/workout/"),foodDetail:"".concat(r,"/api/meals/foods/"),addMeal:"".concat(r,"/api/meals/add/"),mealHistory:"".concat(r,"/api/meals/history/"),updateMeal:"".concat(r,"/api/meals/"),deleteMeal:"".concat(r,"/api/meals/"),workoutChart:"".concat(r,"/api/workout/calories/summary/"),mealChart:"".concat(r,"/api/meals/nutrition/summary/"),caloriesChart:"".concat(r,"/api/calorie/daily-calorie-intake/"),weekReportWorkout:"".concat(r,"/api/workout/weekly-report/"),monthReportWorkout:"".concat(r,"/api/workout/monthly-report"),yearReportWorkout:"".concat(r,"/api/workout/yearly-report"),weekReportMeal:"".concat(r,"/api/meals/weekly-report"),monthReportMeal:"".concat(r,"/api/meals/monthly-report"),yearReportMeal:"".concat(r,"/api/meals/yearly-report"),dailyReport:"".concat(r,"/api/daily/daily-nutrition/"),waterIntake:"".concat(r,"/api/daily/water-intake/"),weeklyRecommendation:"".concat(r,"/api/user-profile/recommendations/")}},4905:function(e,a,r){"use strict";var t=r(8472),o=r(2265);a.Z=()=>{let[e,a]=(0,o.useState)(!1);return{loading:e,callApi:async(e,r,o,s)=>{a(!0);try{let a=await (0,t.Z)({method:e,url:r,data:o,...s});return{data:a.data,response:a}}finally{a(!1)}}}}},5770:function(e,a,r){"use strict";r.r(a);var t=r(7437),o=r(2265),s=r(1444),n=r(3409),i=r(6463),l=r(1570),c=r(3337),u=r(452),d=r(8191),p=r(4905);a.default=()=>{let e=(0,s.I0)(),a=(0,i.useRouter)(),{loading:r,error:m,isLogin:f}=(0,s.v9)(e=>e.auth),[h,y]=(0,o.useState)(!1),[g,x]=(0,o.useState)({email:"",password:""}),[w,k]=(0,o.useState)(!1),[b,v]=(0,o.useState)(""),{callApi:N}=(0,p.Z)(),j=e=>{x({...g,[e.target.name]:e.target.value})},C=async e=>{if(e.preventDefault(),!b.trim()){alert("Please enter a valid email.");return}y(!0);try{let{response:e}=await N("post",c.Z.forgotPassword,{email:b},{headers:(0,d.w)()});(null==e?void 0:e.status)?(localStorage.setItem("resetEmail",b),a.push("/Auth/ResetOtp"),(0,u.Z)({label:"OTP sent to your email.",type:"success"})):(0,u.Z)({label:"Error occurred. Try again.",type:"error"})}catch(e){console.error("Forgot Password API Error:",e),(0,u.Z)({label:"Error sending OTP. Try again.",type:"error"})}finally{y(!1)}};return(0,o.useEffect)(()=>{f&&a.push("/SideNav")},[f,a]),(0,t.jsxs)(l.W,{className:"flex flex-wrap justify-center py-16",children:[(0,t.jsxs)("div",{className:"w-full max-w-md bg-background p-8 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-3xl font-semibold text-primary text-center mb-6",children:"Login to Your Account"}),m&&(0,t.jsx)("p",{className:"text-red-500 text-center",children:m}),(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e((0,n.pH)(g))},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-gray-600",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:g.email,onChange:j,required:!0,disabled:r,className:"w-full px-4 py-2 mt-1 border rounded-md bg-background text-txcolor focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-600",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:g.password,onChange:j,required:!0,disabled:r,className:"w-full px-4 py-2 mt-1 border text-txcolor border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-background"})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("button",{type:"button",onClick:()=>k(!0),className:"text-primary  hover:underline",children:"Forgot Password?"})}),(0,t.jsx)("button",{type:"submit",className:"w-full px-6 py-3 text-white bg-primary rounded-md  hover:bg-primary disabled:opacity-50",disabled:r,children:r?"Logging in...":"Log In"})]}),(0,t.jsxs)("div",{className:"mt-4 text-center text-txcolor",children:["New on platform?",(0,t.jsx)("a",{href:"/Auth/SignUp",className:"text-primary hover:underline ml-1",children:"Create an account"})]})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center  bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-background p-6 rounded-lg shadow-lg w-96",children:[(0,t.jsx)("h3",{className:"text-xl text-primary font-semibold mb-4",children:"Forgot Password"}),(0,t.jsxs)("form",{onSubmit:C,children:[(0,t.jsx)("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-2 border rounded-md mb-4 bg-background text-txcolor focus:outline-none focus:ring-2 focus:ring-primary",value:b,onChange:e=>v(e.target.value),required:!0}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("button",{type:"button",onClick:()=>k(!1),className:"text-gray-600",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-md disabled:opacity-50 flex items-center justify-center",disabled:h,children:h?(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sending OTP..."]}):"Submit"})]})]})]})})]})}},1570:function(e,a,r){"use strict";r.d(a,{W:function(){return o}});var t=r(7437);function o(e){return(0,t.jsx)("div",{className:"container  p-8 mx-auto xl:px-0 ".concat(e.className?e.className:""),children:e.children})}r(2265)},3409:function(e,a,r){"use strict";r.d(a,{kS:function(){return c},ob:function(){return u},pH:function(){return i}});var t=r(1116),o=r(8472),s=r(3337),n=r(452);let i=(0,t.hg)("auth/loginUser",async(e,a)=>{let{rejectWithValue:r}=a;try{let a=await o.Z.post(s.Z.signIn,e);return(0,n.Z)({label:"Login successful! Welcome back.",type:"success"}),a.data}catch(e){var t,i;return r((null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||"Login failed.")}}),l=(0,t.oM)({name:"auth",initialState:{user:null,loading:!1,error:null,isLogin:!1,accessToken:null,refreshToken:null},reducers:{logout:e=>{e.user=null,e.isLogin=!1,e.error=null,e.accessToken=null,e.refreshToken=null},rehydrateUser:(e,a)=>{e.user=a.payload.user,e.accessToken=a.payload.accessToken,e.refreshToken=a.payload.refreshToken,e.isLogin=!0}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1;let r={id:a.payload.id,email:a.payload.email,username:a.payload.username,firstName:a.payload.first_name,lastName:a.payload.last_name,isVerified:a.payload.is_verified};e.user=r,e.accessToken=a.payload.access,e.refreshToken=a.payload.refresh,e.isLogin=!0,localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("accessToken",a.payload.access),localStorage.setItem("refreshToken",a.payload.refresh)}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),{logout:c,rehydrateUser:u}=l.actions;a.ZP=l.reducer},8191:function(e,a,r){"use strict";r.d(a,{w:function(){return t}});let t=e=>{let a={"Content-Type":"application/json"};return e&&(a.Authorization="Bearer ".concat(e)),a}},452:function(e,a,r){"use strict";var t=r(4648);a.Z=e=>{let{label:a,type:r}=e,o={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,transition:t.sm,style:{success:{backgroundColor:"#4CAF50",color:"#fff"},error:{backgroundColor:"#F44336",color:"#fff"},warning:{backgroundColor:"#FF9800",color:"#fff"},info:{backgroundColor:"#2196F3",color:"#fff"}}[r]||{}};switch(r){case"success":t.Am.success(a,o);break;case"error":t.Am.error(a,o);break;case"warning":t.Am.warn(a,o);break;case"info":t.Am.info(a,o);break;default:(0,t.Am)(a,o)}}}},function(e){e.O(0,[71,444,116,971,23,744],function(){return e(e.s=1208)}),_N_E=e.O()}]);