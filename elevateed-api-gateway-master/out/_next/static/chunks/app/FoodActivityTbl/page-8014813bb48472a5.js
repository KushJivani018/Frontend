(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{823:function(e,t,l){Promise.resolve().then(l.bind(l,4391))},4391:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var a=l(7437),s=l(2265),r=l(5221),o=l(8030);let i=(0,o.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var n=l(8422);let c=(0,o.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var d=l(452),u=l(4905),m=l(3337),x=l(8191),p=l(1444),y=l(9212),h=l.n(y),f=l(347),b=l(1570),v=l(5638),g=()=>{let{loading:e,callApi:t}=(0,u.Z)(),l=(0,p.v9)(e=>e.auth.accessToken),[o,y]=(0,s.useState)([]),[g,j]=(0,s.useState)(0),[w,N]=(0,s.useState)(!1),[k,Z]=(0,s.useState)(null),[C,_]=(0,s.useState)(!1),[S,D]=(0,s.useState)(null),[M,E]=(0,s.useState)({page:1,limit:10,search:"",sort:"",sortDirection:1}),[F,Y]=(0,s.useState)(""),[T,q]=(0,s.useState)(""),[A,O]=(0,s.useState)(!1),[V,I]=(0,s.useState)(null),[P,W]=(0,s.useState)(""),[z,H]=(0,s.useState)(null),Q=e=>{Z(e),N(!0)},U=()=>{N(!1),Z(null)},B=e=>{O(!0),H(e.id),W(e.quantity),I(e.food_id?[{value:e.food_id,label:e.food_name}]:null)},G=()=>{O(!1),H(null),I(null),W("")},J=async()=>{var e;if(!z){(0,d.Z)({label:"No activity selected.",type:"error"});return}if(!V||0===V.length||!(null===(e=V[0])||void 0===e?void 0:e.value)){(0,d.Z)({label:"Please select a food item.",type:"error"});return}let a={food_id:V[0].value};""!==P&&(a.quantity=P);try{let{response:e}=await t("put","".concat(m.Z.updateMeal).concat(z,"/update/"),a,{headers:(0,x.w)(l)});(null==e?void 0:e.status)===200?((0,d.Z)({label:"Activity updated successfully!",type:"success"}),X(),G()):(0,d.Z)({label:"Failed to update activity.",type:"error"})}catch(e){console.error("Error updating activity:",e),(0,d.Z)({label:"Error updating activity.",type:"error"})}},K=e=>{D(e),_(!0)},L=async()=>{if(S)try{let{response:e}=await t("delete","".concat(m.Z.deleteMeal).concat(S,"/delete/"),void 0,{headers:(0,x.w)(l)});(null==e?void 0:e.status)===204||(null==e?void 0:e.status)===200?((0,d.Z)({label:"Activity deleted successfully!",type:"success"}),X()):(0,d.Z)({label:"Failed to delete activity.",type:"error"})}catch(e){console.error("Error deleting activity:",e),(0,d.Z)({label:"Error deleting activity.",type:"error"})}finally{_(!1),D(null)}},R=(0,s.useMemo)(()=>[{id:"1",fieldName:"id",label:"ID",align:"center"},{id:"2",fieldName:"food_name",label:"Food Name",align:"center"},{id:"3",fieldName:"quantity",label:"Quantity",align:"center",renderValue:e=>Number(e.quantity).toFixed(3)},{id:"4",fieldName:"timestamp",label:"Timestamp",align:"center",renderValue:e=>h()(e.timestamp).format("YYYY-MM-DD")},{id:"5",fieldName:"",label:"Actions",align:"center",renderValue:e=>(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,a.jsx)(i,{className:"text-green-500 cursor-pointer",onClick:()=>Q(e)}),(0,a.jsx)(n.Z,{className:"text-blue-500 cursor-pointer",onClick:()=>B(e)}),(0,a.jsx)(c,{className:"text-red-500 cursor-pointer",onClick:()=>K(e.id)})]})}],[]),X=async()=>{try{let e={...M};F&&(e.start_date=h()(F).format("YYYY-MM-DD")),T&&(e.end_date=h()(T).format("YYYY-MM-DD"));let a=await t("get",m.Z.mealHistory,void 0,{headers:(0,x.w)(l),params:e});y(null==a?void 0:a.data.results),(null==a?void 0:a.data.status)===200&&j(a.data.totalItems)}catch(e){console.error("Error fetching food activities:",e),(0,d.Z)({label:"Error fetching food activities.",type:"error"})}};return(0,s.useEffect)(()=>{X()},[M,F,T]),(0,a.jsxs)("div",{className:"w-full overflow-x-auto sm:overflow-x-visible z-10 mt-5 px-2 sm:px-4 md:px-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"w-full sm:w-1/2 md:w-auto",children:[(0,a.jsx)("label",{htmlFor:"start_date",className:"block text-md font-medium text-txcolor mb-1",children:"Start Date:"}),(0,a.jsx)("input",{type:"date",id:"start_date",value:F,onChange:e=>Y(e.target.value),className:"border rounded bg-secondary text-txcolor p-2 w-full custom-date-picker focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,a.jsxs)("div",{className:"w-full sm:w-1/2 md:w-auto",children:[(0,a.jsx)("label",{htmlFor:"end_date",className:"block text-md font-medium text-txcolor mb-1",children:"End Date:"}),(0,a.jsx)("input",{type:"date",id:"end_date",value:T,onChange:e=>q(e.target.value),className:"border rounded bg-secondary text-txcolor p-2 w-full focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,a.jsx)("div",{className:"w-full overflow-x-auto",children:(0,a.jsx)(r.Z,{columns:R,rows:null!=o?o:[],count:g,filters:M,setFilters:E,loading:e})}),(0,a.jsx)(f.Z,{isOpen:A,onClose:G,children:(0,a.jsx)(b.W,{className:"flex flex-wrap justify-center py-4 px-2 sm:py-6 sm:px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-[500px] bg-background p-3 sm:p-4 rounded-lg shadow-md",children:[(0,a.jsx)(v.Z,{endpoint:m.Z.foodDetail,isMulti:!1,placeholder:"Search and select a food item...",value:V,onChange:e=>{I(e?[e]:null)}}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-txcolor",children:"Quantity (grams)"}),(0,a.jsx)("input",{type:"number",value:P,onChange:e=>W(e.target.value?parseInt(e.target.value):""),className:"mt-1 bg-background text-txcolor block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none",placeholder:"Enter quantity"})]}),(0,a.jsxs)("button",{onClick:J,disabled:e,className:"mt-6 w-full bg-primary text-white py-2 px-4 rounded-md hover:opacity-90 transition-opacity ".concat(e?"opacity-50 cursor-not-allowed":""),children:[e?"Updating...":"Update"," "]})]})})}),(0,a.jsx)(f.Z,{isOpen:w,onClose:U,children:(0,a.jsx)(b.W,{className:"flex flex-wrap justify-center py-4 px-2 sm:py-6 sm:px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-[400px] bg-background p-3 sm:p-4 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-primary text-center mb-4 sm:mb-6",children:"Food Activity Details"}),k&&(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-4 text-txcolor text-sm sm:text-base",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Calories:"})," ",k.total_calories]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Carbohydrates:"})," ",Number(k.total_carbohydrates).toFixed(3)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Fat:"})," ",Number(k.total_fat).toFixed(3)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Protein:"})," ",Number(k.total_protein).toFixed(3)]})]}),(0,a.jsx)("button",{onClick:U,className:"mt-4 sm:mt-6 w-full bg-primary text-white py-2 px-4 rounded-md hover:opacity-90 transition-opacity",children:"Close"})]})})}),(0,a.jsx)(f.Z,{isOpen:C,onClose:()=>_(!1),children:(0,a.jsx)(b.W,{className:"flex flex-wrap justify-center py-4 px-2 sm:py-6 sm:px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-[400px] bg-background p-3 sm:p-4 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-primary text-center mb-4 sm:mb-6",children:"Confirm Deletion"}),(0,a.jsx)("p",{className:"text-txcolor text-center mb-4",children:"Are you sure you want to delete this activity? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("button",{onClick:L,className:"bg-primary text-white py-2 px-4 rounded-md hover:opacity-90 transition-opacity",children:"Delete"}),(0,a.jsx)("button",{onClick:()=>_(!1),className:"bg-gray-500 text-white py-2 px-4 rounded-md hover:opacity-90 transition-opacity",children:"Cancel"})]})]})})})]})}}},function(e){e.O(0,[990,71,444,113,278,777,971,23,744],function(){return e(e.s=823)}),_N_E=e.O()}]);