(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{5286:function(e,t,a){Promise.resolve().then(a.bind(a,4464))},4464:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var l=a(7437),r=a(2265),s=a(5221),i=a(8422);let n=(0,a(8030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var o=a(452),c=a(4905),d=a(3337),u=a(8191),m=a(1444),x=a(9212),p=a.n(x),y=a(5638),f=a(347),v=a(1570);let h=e=>{let{activity:t,accessToken:a,setActivities:s,setIsModalOpen:i,onClose:n}=e,[m,x]=(0,r.useState)(null),[p,f]=(0,r.useState)(t.duration_minutes),{loading:h,callApi:b}=(0,c.Z)();(0,r.useEffect)(()=>{t&&x({value:t.activity,label:t.activity_name})},[t]);let g=async()=>{if(!m)return(0,o.Z)({label:"Please select an activity.",type:"error"});let e={duration_minutes:p,activity:m.value};try{let{response:l}=await b("put","".concat(d.Z.updateWork).concat(t.id,"/update/"),e,{headers:(0,u.w)(a)});(null==l?void 0:l.status)===200&&((0,o.Z)({label:"Activity updated successfully.",type:"success"}),s(e=>e.map(e=>e.id===t.id?{...e,duration_minutes:p,activity:m.value,activity_name:m.label}:e)),i(!1),n())}catch(e){console.error("Error updating activity:",e),(0,o.Z)({label:"Error updating activity.",type:"error"})}};return(0,l.jsx)(v.W,{className:"flex flex-wrap justify-center py-6",children:(0,l.jsxs)("div",{className:"w-full sm:w-[500px] bg-background p-4 rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-primary text-center mb-6",children:"Update Workout Activity"}),(0,l.jsx)(y.Z,{endpoint:d.Z.workoutActivity,placeholder:"Search and select an activity...",value:m,onChange:e=>x(e)}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-txcolor",children:"Duration (in minutes)"}),(0,l.jsx)("input",{type:"number",value:p,onChange:e=>f(parseInt(e.target.value)),required:!0,className:"mt-1 bg-background text-txcolor block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"Enter duration"})]}),(0,l.jsx)("button",{onClick:g,disabled:h,className:"mt-6 w-full bg-primary text-white py-2 px-4 rounded-md ".concat(h?"opacity-50 cursor-not-allowed":"hover:bg-primary-dark"),children:h?"Updating...":"Update"})]})})},b=e=>{let{isOpen:t,onClose:a,onConfirm:r,loading:s}=e;return(0,l.jsx)(f.Z,{isOpen:t,onClose:a,children:(0,l.jsx)(v.W,{className:"flex flex-wrap justify-center py-6",children:(0,l.jsxs)("div",{className:"w-full sm:w-[400px] bg-background p-6 rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-primary text-center mb-4",children:"Confirm Deletion"}),(0,l.jsx)("p",{className:"text-center text-txcolor mb-6",children:"Are you sure you want to delete this activity?"}),(0,l.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,l.jsx)("button",{onClick:r,disabled:s,className:"bg-primary text-white py-2 px-4 rounded-md ".concat(s?"opacity-50 cursor-not-allowed":"hover:bg-red-700"),children:s?"Deleting...":"Delete"}),(0,l.jsx)("button",{onClick:a,className:"bg-gray-300 text-txcolor py-2 px-4 rounded-md",children:"Cancel"})]})]})})})};var g=()=>{let{loading:e,callApi:t}=(0,c.Z)(),a=(0,m.v9)(e=>e.auth.accessToken),[x,y]=(0,r.useState)([]),[v,g]=(0,r.useState)(0),[w,j]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),[_,C]=(0,r.useState)(""),[Z,D]=(0,r.useState)(""),[S,E]=(0,r.useState)(null),[M,Y]=(0,r.useState)(!1),[A,O]=(0,r.useState)({page:1,limit:10,search:"",sort:"",sortDirection:1}),F=(0,r.useMemo)(()=>[{id:"1",fieldName:"id",label:"ID",align:"center"},{id:"2",fieldName:"activity_name",label:"Activity Name",align:"left"},{id:"3",fieldName:"duration_minutes",label:"Duration (Minutes)",align:"center"},{id:"4",fieldName:"calories_burned",label:"Calories Burned",align:"center",renderValue:e=>Number(e.calories_burned).toFixed(3)},{id:"5",fieldName:"timestamp",label:"Timestamp",align:"center",renderValue:e=>p()(e.timestamp).format("YYYY-MM-DD")},{id:"6",fieldName:"",label:"Actions",align:"center",renderValue:e=>(0,l.jsxs)("div",{className:"flex space-x-2 justify-center",children:[(0,l.jsx)(i.Z,{className:"cursor-pointer text-primary hover:text-primary-dark",onClick:()=>W(e)}),(0,l.jsx)(n,{className:"cursor-pointer text-red-500 hover:text-red-700",onClick:()=>I(e.id)})]})}],[]),V=async()=>{try{let e={...A};_&&(e.start_date=p()(_).format("YYYY-MM-DD")),Z&&(e.end_date=p()(Z).format("YYYY-MM-DD"));let l=await t("get",d.Z.workoutData,void 0,{headers:(0,u.w)(a),params:e});y(l.data.results),(null==l?void 0:l.data.status)===200&&g(l.data.totalItems)}catch(e){console.error("Error fetching activities:",e),(0,o.Z)({label:"Error fetching activities.",type:"error"})}};(0,r.useEffect)(()=>{V()},[A,_,Z]);let W=e=>{k(e),j(!0)},I=e=>{E(e),Y(!0)},T=async()=>{if(null!==S)try{let{response:e}=await t("delete","".concat(d.Z.deleteWork).concat(S,"/delete/"),void 0,{headers:(0,u.w)(a)});(null==e?void 0:e.status)===204||(null==e?void 0:e.status)===200?((0,o.Z)({label:"Activity deleted successfully.",type:"success"}),V(),Y(!1)):(0,o.Z)({label:"Failed to delete activity. Please try again.",type:"error"})}catch(t){var e,l;console.error("Error deleting activity:",t),(0,o.Z)({label:(null==t?void 0:null===(l=t.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"An unexpected error occurred.",type:"error"})}},P=()=>{j(!1),V()};return(0,l.jsxs)("div",{className:"w-full overflow-x-auto sm:overflow-x-visible z-10 mt-5 px-2 sm:px-4 md:px-6",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,l.jsx)("label",{htmlFor:"start_date",className:"text-md font-medium text-txcolor",children:"Start Date:"}),(0,l.jsx)("input",{type:"date",id:"start_date",value:_,onChange:e=>C(e.target.value),className:"border rounded bg-secondary text-txcolor p-2 w-full focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,l.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,l.jsx)("label",{htmlFor:"end_date",className:"text-md font-medium text-txcolor",children:"End Date:"}),(0,l.jsx)("input",{type:"date",id:"end_date",value:Z,onChange:e=>D(e.target.value),className:"border rounded bg-secondary text-txcolor p-2 w-full focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,l.jsx)("div",{className:"w-full overflow-x-auto",children:(0,l.jsx)(s.Z,{columns:F,rows:null!=x?x:[],count:v,filters:A,setFilters:O,loading:e})}),w&&N&&(0,l.jsx)(f.Z,{isOpen:w,onClose:P,children:(0,l.jsx)(h,{activity:N,accessToken:a,setActivities:y,setIsModalOpen:j,onClose:P})}),(0,l.jsx)(b,{isOpen:M,onClose:()=>Y(!1),onConfirm:T,loading:e})]})}}},function(e){e.O(0,[990,71,444,113,278,777,971,23,744],function(){return e(e.s=5286)}),_N_E=e.O()}]);